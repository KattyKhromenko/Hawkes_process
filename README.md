# Hawkes_process

#Построение книги лимитированных заявок LIMIT ORDER BOOK

Книга лимитированных заявок (Limit Order Book) отстраивается с учетом действий, производимых трейдерами. 
На первоначальном этапе построения биржевого стакана отбираются только лимитированные заявки и перемещаются в специально созданную очередь заявок:
1.) Если состояние заявки 1 – выставление, то такая заявка перемещается в очередь заявок: если в очереди заявок уже есть заявка с таким же уровнем цены и в том же направлении (Bid/Ask),то прибавляем объем новой заявки к уже существующей. 
2.) Если состояние заявки 0 – отмена, то в очереди заявок ищем заявку с соответствующим номером и обновляем: из указанного в ней объема вычитается объем заявки с Action=0. 
3.) Если состояние заявки 2 – исполнение, то в очереди заявок осуществляется поиск заявки с соответствующим номером и обновление: из указанного в ней объема вычитается объем, на который произошла сделка.
Если после исполнения заявки образовался отрицательный объем, то данную заявку можно идентифицировать как айсберг-заявку. Для того, чтобы избежать отрицательных объемов, заявки типа айсберг можно удалить с очереди заявок, либо обнулить объем.


#Используемые модели
• Одномерный процесс Хоукса с 2 экспоненциальными функциями ядра;
• Модель распределенного лага (ADL);
• Автокорреляционная функция;
• Кросс-корреляционная функция;
• Тест Кристофферсена на независимость. (Christoffersen’s 1998 Exceedence Independence Test)
• Тест Андерсона-Дарлинга (Anderson-Darling Test)

#Данные: данные торгов по ММВБ за разные торговые дни

#Используемые метрики ликвидности для получения общего Индекса Ликвидности
- Бид-Аск спред - разность между лучшими ценами заявок на продажу (Best Ask Price) и на покупку (Best Bid Price) в один момент времени.
- Обратная Глубина (Inverse Depth/Market Impact) – показатель, который измеряется на стороне спроса/предложения и показывает, как заявка размером 5000 руб. для ALRS, 30 000 руб. для SBER, 5000 руб. для MGNT сместит лучшую цену спроса/предложения (Best bid/Ask Price) в любой момент времени. Для расчета Market Impact для каждой анализируемой акции использовался 90% персентиль объема за торговый день.
- Котируемый объем (Quoted Volume) – сумма объемов в книге лимитированных заявок до заданного момента времени независимо от цены.
