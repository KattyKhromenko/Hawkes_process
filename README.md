# Hawkes_process

#Построение книги лимитированных заявок LIMIT ORDER BOOK

Книга лимитированных заявок (Limit Order Book) отстраивается с учетом действий, производимых трейдерами. 
На первоначальном этапе построения биржевого стакана отбираются только лимитированные заявки и перемещаются в специально созданную очередь заявок:
1.) Если состояние заявки 1 – выставление, то такая заявка перемещается в очередь заявок: если в очереди заявок уже есть заявка с таким же уровнем цены и в том же направлении (Bid/Ask),то прибавляем объем новой заявки к уже существующей. 
2.) Если состояние заявки 0 – отмена, то в очереди заявок ищем заявку с соответствующим номером и обновляем: из указанного в ней объема вычитается объем заявки с Action=0. 
3.) Если состояние заявки 2 – исполнение, то в очереди заявок осуществляется поиск заявки с соответствующим номером и обновление: из указанного в ней объема вычитается объем, на который произошла сделка.
Если после исполнения заявки образовался отрицательный объем, то данную заявку можно идентифицировать как айсберг-заявку. Для того, чтобы избежать отрицательных объемов, заявки типа айсберг можно удалить с очереди заявок, либо обнулить объем.
